/*! WP User Manager - v2.9
 * https://wpusermanager.com
 * Copyright (c) 2023; * Licensed GPLv2+ */
!function(a,b){"use strict";function c(a){if(!a)return!1;var b=[];return wpumCustomizeControls.mergeTags.forEach(function(c){b.push({text:c.name,onclick:function(){a.insertContent("{"+c.tag+"}")}})}),b}function d(){var b=wpumCustomizeControls.selected_email_id;a.customize("wpum_email["+b+"][content]",function(b){b.set(a.editor.getContent("wpum-mail-content-editor"))})}a.customize.bind("ready",function(){var e=b("#wpum-email-editor-btn"),f=b("#wpum-editor-window"),g=e.find("span.dashicons"),h=!1,i=!1,j=b("#customize-preview"),k=b("#wpum-display-tags-btn"),l=b(".wpum-email-tags-list");k.click(function(a){var c=b(a.currentTarget);a.preventDefault(),c.toggleClass("active"),l.slideToggle("fast")}),f.appendTo(".wp-full-overlay"),e.click(function(e){var k=b(e.currentTarget);e.preventDefault(),k.toggleClass("active"),j.toggleClass("scroll-frame"),!0===i&&a.editor.remove("wpum-mail-content-editor"),i=!i,k.find("span:not(.dashicons)").text(function(a,b){return b===wpumCustomizeControls.labels.open?wpumCustomizeControls.labels.close:wpumCustomizeControls.labels.open}),!0===i?g.removeClass("dashicons-edit").addClass("dashicons-hidden"):g.removeClass("dashicons-hidden").addClass("dashicons-edit"),f.toggleClass("is-active"),!1===h&&b(document).on("tinymce-editor-setup",function(a,b){b.settings.toolbar1+=",wpumEmailTags",b.addButton("wpumEmailTags",{text:wpumCustomizeControls.labels.addMerge,icon:!1,type:"menubutton",tooltip:wpumCustomizeControls.labels.addMergeTooltip,menu:c(b)}),h=!0}),a.editor.initialize("wpum-mail-content-editor",{tinymce:{setup:function(a){a.on("change",function(a,b){d()}),a.on("keyup",function(a,b){d()})}}})}),wpumCustomizeControls.sections.forEach(function(b){a.customize.section(b,function(a){a.expanded.bind(function(a){!1===a&&e.hasClass("active")&&e.click()})})})})}(window.wp,jQuery);