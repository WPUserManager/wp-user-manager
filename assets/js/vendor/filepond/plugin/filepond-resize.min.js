/*!
 * FilePondPluginImageResize 2.0.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */

/* eslint-disable */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).FilePondPluginImageResize=t()}(this,function(){"use strict";var e=function(e){var t=e.addFilter,n=e.utils.Type;return t("DID_LOAD_ITEM",function(e,t){var n=t.query;return new Promise(function(t,i){var r=e.file;if(!function(e){return/^image/.test(e.type)}(r)||!n("GET_ALLOW_IMAGE_RESIZE"))return t(e);var o=n("GET_IMAGE_RESIZE_MODE"),u=n("GET_IMAGE_RESIZE_TARGET_WIDTH"),a=n("GET_IMAGE_RESIZE_TARGET_HEIGHT"),l=n("GET_IMAGE_RESIZE_UPSCALE");if(null===u&&null===a)return t(e);var d,E,f,s=null===u?a:u,c=null===a?s:a,I=URL.createObjectURL(r);d=I,E=function(n){if(URL.revokeObjectURL(I),!n)return t(e);var i=n.width,r=n.height,u=(e.getMetadata("exif")||{}).orientation||-1;if(u>=5&&u<=8){var a=[r,i];i=a[0],r=a[1]}return i===s&&r===c?t(e):i<=s&&r<=c&&!l?t(e):(e.setMetadata("resize",{mode:o,upscale:l,size:{width:s,height:c}}),void t(e))},(f=new Image).onload=function(){var e=f.naturalWidth,t=f.naturalHeight;f=null,E({width:e,height:t})},f.onerror=function(){return E(null)},f.src=d})}),{options:{allowImageResize:[!0,n.BOOLEAN],imageResizeMode:["cover",n.STRING],imageResizeUpscale:[!0,n.BOOLEAN],imageResizeTargetWidth:[null,n.INT],imageResizeTargetHeight:[null,n.INT]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e});
