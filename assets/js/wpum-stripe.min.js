/*! WP User Manager - v2.9
 * https://wpusermanager.com
 * Copyright (c) 2023; * Licensed GPLv2+ */
!function(a){a(document).ready(function(){a(".wpum-registration-form form").submit(function(b){if(a('input[name="wpum_stripe_plan"]').length){b.preventDefault(),a(".wpum-message").remove();var c=a("input[type=submit]",this);c.attr("disabled","disabled").css("opacity","0.8").val("Registering...");var d=this,e=a(this).serialize();e=e+"&"+c.attr("name")+"=1",a.post(wpum_stripe.ajaxurl,{action:"wpum_stripe_register",data:e},function(b){if(!b.success&&b.data)return a(d).before(b.data),void c.removeAttr("disabled").css("opacity","1").val("Register");if(b.data.id){Stripe(wpum_stripe.stripe).redirectToCheckout({sessionId:b.data.id})}else window.location.href="/"}).fail(function(){alert("error"),c.removeAttr("disabled").css("opacity","1").val("Register")})}}),a("#wpum-stripe-manage-billing").on("click",function(b){b.preventDefault();var c=a(this);c.attr("disabled","disabled").css("opacity","0.8"),a.post(wpum_stripe.ajaxurl,{action:"wpum_stripe_manage_billing",nonce:c.data("nonce")},function(b){if(!b.success&&b.data)return alert(b.data),void c.removeAttr("disabled").css("opacity","1");b.data.url&&(window.location.href=b.data.url),a(this).removeAttr("disabled").css("opacity","1")}).fail(function(){alert("Error"),a(this).removeAttr("disabled").css("opacity","1")})}),a(".wpum-stripe-checkout").on("click",function(b){b.preventDefault();var c=a(this),d=c.data("plan-id");c.attr("disabled","disabled").css("opacity","0.8"),a.post(wpum_stripe.ajaxurl,{action:"wpum_stripe_checkout",plan:d,nonce:c.data("nonce")},function(b){if(!b.success&&b.data)return alert(b.data),void c.removeAttr("disabled").css("opacity","1");if(b.data.id){Stripe(wpum_stripe.stripe).redirectToCheckout({sessionId:b.data.id})}else alert("error");a(this).removeAttr("disabled").css("opacity","1")}).fail(function(){alert("error"),c.removeAttr("disabled").css("opacity","1")})})})}(jQuery);