wpJsonpFlightsWidget([4],{0:function(t,s){},BKT8:function(t,s){},ETmr:function(t,s){},QUtD:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("7+uW"),i=e("mtWM"),n=e.n(i),o=e("mw3O"),l=e.n(o),r=e("vCKl"),c=e.n(r),d=(e("ETmr"),{name:"emails-editor",data:function(){return{loading:!1,success:!1,error:!1,placeholder:wpumEmailsEditor.placeholder,test_email:wpumEmailsEditor.default_email,emails:wpumEmailsEditor.emails,labels:wpumEmailsEditor.labels,url:wpumEmailsEditor.pluginURL,emailkey:""}},methods:{sanitized:function(t){return c()(t)},getEmailStatusIcon:function(t){return["dashicons","active"==t&&"dashicons-yes","manual"==t&&"dashicons-arrow-right-alt"]},getTooltip:function(t){var s=this.sanitized(this.labels.tooltip_automatic);return"manual"==t&&(s=this.sanitized(this.labels.tooltip_manual)),s},getCustomizationURL:function(t){var s=wpumEmailsEditor.url+l.a.stringify({wpum_email_customizer:!0,email:this.sanitized(t)},{addQueryPrefix:!0});return wpumEmailsEditor.customizeurl+l.a.stringify({"autofocus[panel]":this.sanitized(t),wpum_email_customizer:!0,email:this.sanitized(t),url:s},{addQueryPrefix:!0})},sendTestEmail:function(t){var s=this;this.loading=!0,this.error=!1,this.success=!1,n.a.post(wpumEmailsEditor.ajax,l.a.stringify({email:this.test_email,nonce:wpumEmailsEditor.nonce}),{params:{action:"wpum_send_test_email"}}).then(function(t){!0===t.data.success&&(s.loading=!1,s.error=!1,s.success=!0);var e=s;setInterval(function(){e.$data.success=!1},4e3)}).catch(function(t){s.loading=!1,s.error=!0,s.success=!1})},emailEnabledChange:function(t,s){var e=this;this.emailkey=t,n.a.post(wpumEmailsEditor.ajax,l.a.stringify({key:t,nonce:wpumEmailsEditor.nonce,enabled:s.value}),{params:{action:"wpum_enabled_email"}}).then(function(t){!0===t.data.success&&(e.emailkey="")}).catch(function(t){e.emailkey=""})}}}),m={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"wpum-emails-list"}},[e("h1",[e("img",{attrs:{src:t.url+"assets/images/logo.svg",alt:"WP User Manager"}}),t._v("\n\t\t\t"+t._s(t.labels.title)+"\n\t\t")]),t._v(" "),t.success?e("div",{staticClass:"notice notice-success is-dismissible"},[e("p",[e("strong",{domProps:{textContent:t._s(t.sanitized(t.labels.success))}})])]):t._e(),t._v(" "),t.error?e("div",{staticClass:"notice notice-error is-dismissible"},[e("p",[e("strong",{domProps:{textContent:t._s(t.sanitized(t.labels.error))}})])]):t._e(),t._v(" "),e("div",{staticClass:"wp-filter"},[e("form",{staticClass:"search-form search-plugins",attrs:{action:""},on:{submit:function(s){return s.preventDefault(),t.sendTestEmail(s)}}},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.test_email,expression:"test_email"}],staticClass:"wp-filter-search",attrs:{name:"email",disabled:t.loading,placeholder:t.labels.placeholder,type:"text"},domProps:{value:t.test_email},on:{input:function(s){s.target.composing||(t.test_email=s.target.value)}}})]),t._v(" "),e("a",{staticClass:"button",attrs:{href:"#",disabled:t.loading},on:{click:t.sendTestEmail}},[e("span",{staticClass:"dashicons dashicons-email-alt"}),t._v(" "),e("span",{staticClass:"send-text",domProps:{textContent:t._s(t.sanitized(t.labels.send))}})]),t._v(" "),t.loading?e("div",{staticClass:"spinner is-active"}):t._e()])]),t._v(" "),e("table",{staticClass:"wp-list-table widefat fixed striped"},[e("thead",[e("tr",[e("th",{staticClass:"icon-col",attrs:{scope:"col"}}),t._v(" "),e("th",{staticClass:"column-primary",attrs:{scope:"col"},domProps:{textContent:t._s(t.sanitized(t.labels.email))}}),t._v(" "),e("th",{attrs:{scope:"col"},domProps:{textContent:t._s(t.sanitized(t.labels.description))}}),t._v(" "),e("th",{attrs:{scope:"col"},domProps:{textContent:t._s(t.sanitized(t.labels.recipients))}}),t._v(" "),e("th",{attrs:{scope:"col"}})])]),t._v(" "),e("tbody",t._l(t.emails,function(s,a){return e("tr",{key:a},[e("td",[e("div",{attrs:{"data-balloon":t.getTooltip(s.status),"data-balloon-pos":"right"}},[e("span",{class:t.getEmailStatusIcon(s.status)})])]),t._v(" "),e("td",[e("a",{attrs:{href:t.getCustomizationURL(a)},domProps:{textContent:t._s(t.sanitized(s.name))}})]),t._v(" "),e("td",{domProps:{textContent:t._s(t.sanitized(s.description))}}),t._v(" "),e("td",{domProps:{textContent:t._s(t.sanitized(s.recipient))}}),t._v(" "),e("td",[e("a",{staticClass:"button",attrs:{href:t.getCustomizationURL(a)}},[e("span",{staticClass:"dashicons dashicons-edit"}),t._v(" "),e("span",{domProps:{textContent:t._s(t.sanitized(t.labels.customize))}})]),t._v(" Â  "),e("toggle-button",{on:{change:function(s){return t.emailEnabledChange(a,s)}},model:{value:s.enabled,callback:function(e){t.$set(s,"enabled",e)},expression:"email.enabled"}}),t._v(" "),t.emailkey===a?e("div",{staticClass:"spinner is-active"}):t._e()],1)])}),0),t._v(" "),e("tfoot",[e("tr",[e("th",{attrs:{scope:"col"}}),t._v(" "),e("th",{staticClass:"column-primary",attrs:{scope:"col"},domProps:{textContent:t._s(t.sanitized(t.labels.email))}}),t._v(" "),e("th",{attrs:{scope:"col"},domProps:{textContent:t._s(t.sanitized(t.labels.description))}}),t._v(" "),e("th",{attrs:{scope:"col"},domProps:{textContent:t._s(t.sanitized(t.labels.recipients))}}),t._v(" "),e("th",{attrs:{scope:"col"}})])])])])},staticRenderFns:[]};var u=e("VU/8")(d,m,!1,function(t){e("BKT8")},null,null).exports,p=e("nkUn");a.a.config.productionTip=!1,a.a.component("ToggleButton",p.ToggleButton),new a.a({el:"#wpum-emails-list",components:{EmailsList:u},template:"<EmailsList/>"})}},["QUtD"]);
//# sourceMappingURL=emails.js.map